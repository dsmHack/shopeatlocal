{{!-- Shop/product.hbs
// -----------
// Product view --}}

{{#with Product}}
<div class="PageProduct container-md pt-4 pb-2">
	<div class="d-flex align-items-center">
		<!-- logo, title, producer info -->
		<div class="d-none d-md-block mr-3">
			<img src="{{CoopParams.ProductLogoPath}}" alt="" height="40">
		</div>
		<div>
			<span class="font-weight-semi">{{NameProduct}}</span><br>
			{{>Misc/pLinkIDProduct}}
		</div>
		<div class="text-right ml-auto">
			<a href="/about-producer/{{IDProducer}}" class="font-weight-semi">{{NameBus}}</a><br>
			{{>Misc/pLinkIDProducer}}
		</div>
		<div class="d-none d-md-block ml-3">
			<img src="{{hPrefixStatic 'producer.svg'}}" alt="" width="40" height="40">
		</div>
	</div>

	<div id="FlashesProduct{{IDProduct}}" class="mt-3"></div>

	<div class="my-3">
		<div class="row">
			{{log this Product}}

			{{!-- Carousel Column --}}
			{{#if (gt Images.length 0)}}
			<div class="col-md-4 mb-3">
				<div id="productCarousel{{IDProduct}}" class="carousel slide carousel-fade"
					data-interval="false">
					<!-- Slides -->
					<div class="carousel-inner">
						{{#each Images}}
						<div class="carousel-item {{#if @first}}active{{/if}}">
							<img class="d-block mx-auto" src="{{hPrefixImageWithStorage this}}"
								alt="{{../NameProduct}} image {{add @index 1}}">
						</div>
						{{/each}}
					</div>

					<!-- Indicators (dots only) -->
					<ol class="carousel-indicators mb-0">
						{{#each Images}}
						<li data-target="#productCarousel{{../IDProduct}}"
							data-slide-to="{{@index}}" class="{{#if @first}}active{{/if}}"></li>
						{{/each}}
					</ol>
				</div>
			</div>
			{{else}}
			<div class="col-md-4 mb-3">
				<p>No images available for this product.</p>
			</div>
			{{/if}}

			{{!-- Details Column --}}
			<div class="col-md-8">
				<div>
					<hr class="d-none d-md-block mt-0">

					{{#if CkNew}}
					<div class="text-center mt-2 mt-md-0">
						<a href="/product-search" class="text-danger font-weight-bold">NEW</a>
					</div>
					{{/if}}

					{{#if (hCkLessEq QtyOfferWebProduct QtyPromWebProduct)}}
					<div class="text-center font-weight-bold text-danger">OUT OF STOCK</div>
					{{/if}}

					<div class="text-center">
						<a href="/product-search?IDCat={{IDCat}}" class="text-muted">{{NameCat}}</a>
					</div>
					<div class="text-center">
						<a href="/product-search?IDSubcat={{IDSubcat}}"
							class="text-muted">{{NameSubcat}}</a>
					</div>
					<div class="text-center mt-2">{{>Misc/pLinksAttrProduct}}</div>

					<div class="my-3">
						{{#if Vtys}}
						{{>Shop/pTblVtyShop Vtys}}
						{{else}}
						<hr>
						<div class="jumbotron">
							<h2 class="display-4 font-size-200">No varieties</h2>
						</div>
						{{/if}}
					</div>
				</div>

				<div class="Descrip MargP-Trim text-center mt-4 px-sm-3 px-lg-5">
					{{hHTMLLinesP Descrip}}
				</div>
			</div>
		</div>
	</div>

	<!-- Carousel & image CSS overrides -->
	<style>
		/* center carousel content */
		#productCarousel {
				{
				IDProduct
			}
		}

			{
			display: flex;
			flex-direction: column;
			align-items: center;
		}

		/* image container fixed height */
		#productCarousel {
				{
				IDProduct
			}
		}

		.carousel-inner {
			width: 100%;
			height: 100%;
		}

		/* place dots right below image */
		#productCarousel {
				{
				IDProduct
			}
		}

		.carousel-indicators {
			position: static;
			margin: 8px 0 0;
		}

		/* fade effect only */
		#productCarousel {
				{
				IDProduct
			}
		}

		.carousel-fade .carousel-item,
		#productCarousel {
				{
				IDProduct
			}
		}

		.carousel-fade .carousel-item-next,
		#productCarousel {
				{
				IDProduct
			}
		}

		.carousel-fade .carousel-item-prev,
		#productCarousel {
				{
				IDProduct
			}
		}

		.carousel-fade .carousel-item.active {
			transform: none !important;
			transition: opacity .5s ease-in-out !important;
		}

		/* style dots */
		#productCarousel {
				{
				IDProduct
			}
		}

		.carousel-indicators li {
			width: 12px;
			height: 12px;
			margin: 0 6px;
			background-color: #000 !important;
			border-radius: 50%;
			opacity: 0.5;
		}

		#productCarousel {
				{
				IDProduct
			}
		}

		.carousel-indicators .active {
			opacity: 1;
			background-color: #000 !important;
		}

		/* lock image size, no transitions */
		#productCarousel {
				{
				IDProduct
			}
		}

		.carousel-item img {
			height: 100%;
			width: 100%;
			object-fit: contain;
			transition: none !important;
		}
	</style>
</div>
{{/with}}