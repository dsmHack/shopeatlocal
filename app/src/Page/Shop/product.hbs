{{!-- product.hbs
// -----------
// Product view --}}

{{#with Product}}
<div class="PageProduct container-md pt-4 pb-2">
	<div class="d-flex align-items-center">
		<div class="d-none d-md-block mr-3">
			<img src="{{CoopParams.ProductLogoPath}}" alt="" height="40">
		</div>

		<div>
			{{!-- Normally the ID comes first, but I guess we will place the name
			// above, since the shopper uses this: --}}
			<span class="font-weight-semi">{{NameProduct}}</span><br>
			{{>Misc/pLinkIDProduct}}
		</div>

		<div class="text-right ml-auto">
			{{!-- Normally the ID comes first, but I guess we will place the name
			// above, since the shopper uses this: --}}
			<a href="/about-producer/{{IDProducer}}" class="font-weight-semi">
				{{NameBus}}
			</a><br>
			{{>Misc/pLinkIDProducer}}
		</div>

		<div class="d-none d-md-block ml-3">
			<img src="{{hPrefixStatic 'producer.svg'}}" alt="" width="40" height="40">
		</div>
	</div>

	<div id="FlashesProduct{{IDProduct}}" class="mt-3">
		{{!-- This element is used by the client. --}}
	</div>

	<div class="my-3">
		<div class="row">
			{{log this Product}}
			{{#if (gt Images.length 0)}}
			<div id="productCarousel{{IDProduct}}" class="carousel slide" data-ride="carousel">
				<!-- Indicators -->
				<ol class="carousel-indicators">
					{{#each Images}}
					<li data-target="#productCarousel{{../IDProduct}}" data-slide-to="{{@index}}"
						class="{{#if @first}}active{{/if}}"></li>
					{{/each}}
				</ol>

				<!-- Slides -->
				<div class="carousel-inner">
					{{#each Images}}
					<div class="carousel-item {{#if @first}}active{{/if}}">
						<img class="d-block w-100" src="{{hPrefixImageWithStorage this}}"
							alt="{{../NameProduct}} image {{add @index 1}}">
					</div>
					{{/each}}
				</div>

				<!-- Controls -->
				<a class="carousel-control-prev" href="#productCarousel{{IDProduct}}" role="button"
					data-slide="prev">
					<span class="carousel-control-prev-icon" aria-hidden="true"></span>
					<span class="sr-only">Previous</span>
				</a>
				<a class="carousel-control-next" href="#productCarousel{{IDProduct}}" role="button"
					data-slide="next">
					<span class="carousel-control-next-icon" aria-hidden="true"></span>
					<span class="sr-only">Next</span>
				</a>
			</div>
			{{else}}
			<p>No images available for this product.</p>
			{{/if}}



			<div class="col-md">
				<div>
					<hr class="d-none d-md-block mt-0">

					{{#if CkNew}}
					<div class="text-center mt-2 mt-md-0">
						<a href="/product-search" class="text-danger font-weight-bold">NEW</a>
					</div>
					{{/if}}

					{{#if (hCkLessEq QtyOfferWebProduct QtyPromWebProduct)}}
					<div class="text-center font-weight-bold text-danger">
						OUT OF STOCK
					</div>
					{{/if}}

					<div class="text-center">
						<a href="/product-search?IDCat={{IDCat}}" class="text-muted">
							{{NameCat}}
						</a>
					</div>

					<div class="text-center">
						<a href="/product-search?IDSubcat={{IDSubcat}}" class="text-muted">
							{{NameSubcat}}
						</a>
					</div>

					<div class="text-center mt-2">
						{{>Misc/pLinksAttrProduct}}
					</div>

					{{>Shop/pFavoriteButton ShowButton=../CredUser}}

					<div class="my-3">
						{{#if Vtys}}
						{{>Shop/pTblVtyShop Vtys}}
						{{else}}
						<hr>
						<div class="jumbotron">
							<h2 class="display-4 font-size-200">No varieties</h2>
						</div>
						{{/if}}
					</div>
				</div>

				<div class="Descrip MargP-Trim text-center mt-4 px-sm-3 px-lg-5">
					{{!-- Shoppers see this, so rather leave it blank than say 'no
					// description'. --}}
					{{hHTMLLinesP Descrip}}
				</div>
			</div>
		</div>
	</div>

	<style>
		.carousel-control-prev-icon {
			filter: invert(1) brightness(1.2);
		}

		.carousel-control-next-icon {
			filter: invert(1) brightness(1.2);
		}

		.carousel-indicators li {
			background-color: #000;
		}

		.carousel-indicators .active {
			background-color: #333;
		}

		.carousel-item img {
			width: auto;
			/* donâ€™t force 100% width */
			max-width: 100%;
			/* but allow it to shrink if too big */
			height: auto;
			/* keep aspect ratio */
			object-fit: contain;
			/* show the whole image, no cropping */
			margin: 0 auto;
			/* center it horizontally */
		}
	</style>
</div>
{{/with}}